title: NTP peers
agents: linux
catalog: os/services
license: GPL
distribution: check_mk
description:
 This check uses the output of {ntpq -p} as sent by the agent. It is
 a list of all NTP peers with their state, stratum, offset and jitter.
 The check gets critical if the time offset exceeds a configurable level,
 if the stratum is too high or on othe error conditions. It gets UNKNOWN
 if the peer is unreachable or has not answered for a long time.

 Note: This check creates one individual service for each peer. It is useful
 for monitoring the health of the peers. If you want to monitor only the
 time of the NTP client, you might rather use {ntp.time}.

item:
 The name or IP address of the peer (first column in output of {ntpq -p}.

examples:
 # Set critical stratum to 3, global warning/critical levels to 5.0 and 10.0 ms
 ntp_default_levels = (3, 5.0, 10.0)

perfdata:
 Two variables: the time {offset} to the peer in milliseconds and the
 {jitter} in ms.

inventory:
 Checks are created for all peers which have been contacted at least once,
 if {ntp_inventory_mode} is set to {"detailed"} or {"both"}. In case
 of {"summary"} a check of type {ntp.time} is being created.

