Title: IPMI cache initialization race condition
Component: checks
Benefit: 6
State: open
Cost: 4
Date: 2011-07-18 15:42:34
Class: nastiness

there is a very nasty issue with the IPMI agent code - we 
kills the initial build of the SDR cache there will be no point in re-doing the scan and IPMI will be disabled forever.
The problem is that many IPMI modules are not able to handle concurrent requests. If building the SDR cache takes longer than 55+ seconds then we gh chance that a new check_mk_agent call happens via inetd. This second call will cause an IPMI issue which will cause the SDR cache scan to fail. 
From that time on, IPMI will be disabled / broken.

Very ugly issue, maybe xinetd can disable multiple runs of the same service (but this would mean staleness issues will stop the agent forever)
